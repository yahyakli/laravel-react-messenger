import{r as i,j as e,a as y,u as b,W as T,q as I,Y as L}from"./app-CJE6rz52.js";import{A as _}from"./ApplicationLogo-CoH6Rraj.js";import{q as $}from"./transition-CCfpzmgI.js";import{U as N}from"./UserAvatar-DkGxWMV8.js";import{P as D}from"./PrimaryButton-1OoOtJh5.js";import{k as R,S as F}from"./SecondaryButton-_Zw4D2JM.js";import{I as U}from"./InputLabel-cueCBTGJ.js";import{T as M,I as k}from"./TextInput-CLaPGoZ7.js";import{C as A}from"./Checkbox-CIxZT8SI.js";function H({title:s,titleId:r,...a},t){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),s?i.createElement("title",{id:r},s):null,i.createElement("path",{d:"M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"}))}const O=i.forwardRef(H),ie=i.forwardRef(function({className:r="",isFocused:a=!1,...t},n){const l=n||i.useRef();return i.useEffect(()=>{a&&l.current.focus()},[]),e.jsx("textarea",{...t,className:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 dark:focus:border-indigo-600 focus:ring-indigo-500 dark:focus:ring-indigo-600 rounded-md shadow-sm "+r,ref:l})}),C=i.createContext(),v=({children:s})=>{const[r,a]=i.useState(!1),t=()=>{a(n=>!n)};return e.jsx(C.Provider,{value:{open:r,setOpen:a,toggleOpen:t},children:e.jsx("div",{className:"relative",children:s})})},B=({children:s})=>{const{open:r,setOpen:a,toggleOpen:t}=i.useContext(C);return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:t,children:s}),r&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)})]})},P=({align:s="right",width:r="48",contentClasses:a="py-1 bg-white dark:bg-gray-700",children:t})=>{const{open:n,setOpen:l}=i.useContext(C);let m="origin-top";s==="left"?m="ltr:origin-top-left rtl:origin-top-right start-0":s==="right"&&(m="ltr:origin-top-right rtl:origin-top-left end-0");let x="";return r==="48"&&(x="w-48"),e.jsx(e.Fragment,{children:e.jsx($,{as:i.Fragment,show:n,enter:"transition ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx("div",{className:`absolute z-50 mt-2 rounded-md shadow-lg ${m} ${x}`,onClick:()=>l(!1),children:e.jsx("div",{className:"rounded-md ring-1 ring-black ring-opacity-5 "+a,children:t})})})})},q=({className:s="",children:r,...a})=>e.jsx(y,{...a,className:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-800 transition duration-150 ease-in-out "+s,children:r});v.Trigger=B;v.Content=P;v.Link=q;const f=v;function V({active:s=!1,className:r="",children:a,...t}){return e.jsx(y,{...t,className:"inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 transition duration-150 ease-in-out focus:outline-none "+(s?"border-indigo-400 dark:border-indigo-600 text-gray-900 dark:text-gray-100 focus:border-indigo-700 ":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-700 focus:text-gray-700 dark:focus:text-gray-300 focus:border-gray-300 dark:focus:border-gray-700 ")+r,children:a})}function w({active:s=!1,className:r="",children:a,...t}){return e.jsx(y,{...t,className:`w-full flex items-start ps-3 pe-4 py-2 border-l-4 ${s?"border-indigo-400 dark:border-indigo-600 text-indigo-700 dark:text-indigo-300 bg-indigo-50 dark:bg-indigo-900/50 focus:text-indigo-800 dark:focus:text-indigo-200 focus:bg-indigo-100 dark:focus:bg-indigo-900 focus:border-indigo-700 dark:focus:border-indigo-300":"border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 hover:border-gray-300 dark:hover:border-gray-600 focus:text-gray-800 dark:focus:text-gray-200 focus:bg-gray-50 dark:focus:bg-gray-700 focus:border-gray-300 dark:focus:border-gray-600"} text-base font-medium focus:outline-none transition duration-150 ease-in-out ${r}`,children:a})}let j;const z=new Uint8Array(16);function W(){if(!j&&(j=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!j))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return j(z)}const d=[];for(let s=0;s<256;++s)d.push((s+256).toString(16).slice(1));function Z(s,r=0){return d[s[r+0]]+d[s[r+1]]+d[s[r+2]]+d[s[r+3]]+"-"+d[s[r+4]]+d[s[r+5]]+"-"+d[s[r+6]]+d[s[r+7]]+"-"+d[s[r+8]]+d[s[r+9]]+"-"+d[s[r+10]]+d[s[r+11]]+d[s[r+12]]+d[s[r+13]]+d[s[r+14]]+d[s[r+15]]}const G=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),E={randomUUID:G};function S(s,r,a){if(E.randomUUID&&!r&&!s)return E.randomUUID();s=s||{};const t=s.random||(s.rng||W)();return t[6]=t[6]&15|64,t[8]=t[8]&63|128,Z(t)}const Y=({})=>{const[s,r]=i.useState([]),{on:a}=b();return i.useEffect(()=>{a("toast.show",t=>{const n=S();r(l=>[...l,{message:t,uuid:n}]),setTimeout(()=>{r(l=>l.filter(m=>m.uuid!==n))},5e3)})},[a]),e.jsx("div",{className:"toast",children:s.map((t,n)=>e.jsx("div",{className:"alert alert-success py-3 px-4 text-gray-100 rounded-lg min-w-[240px] xs:w-auto",children:e.jsx("span",{children:t.message})},t.uuid))})},J=({})=>{const[s,r]=i.useState([]),{on:a,off:t}=b();return i.useEffect(()=>(a("newMessageNotification",({user:l,group_id:m,message:x})=>{const h=S();r(p=>[...p,{message:x,uuid:h,user:l,group_id:m}]),setTimeout(()=>{r(p=>p.filter(o=>o.uuid!==h))},3e3)}),()=>{}),[a]),e.jsx("div",{className:"toast toast-top toast-center",children:s.map(n=>e.jsx("div",{className:"alert alert-success py-3 px-4 text-gray-100 rounded-lg overflow-hidden max-w-[240px]",children:e.jsxs(y,{href:n.group_id?route("chat.group",n.group_id):route("chat.user",n.user.id),className:"flex items-center gap-2",children:[e.jsx(N,{user:n.user}),e.jsx("span",{children:n.message})]})},n.uuid))})},K=({show:s=!1,onClose:r=()=>{}})=>{const{emit:a}=b(),{data:t,setData:n,processing:l,reset:m,post:x,errors:h}=T({name:"",email:"",is_admin:!1}),p=u=>{u.preventDefault(),x(route("user.store"),{onSuccess:()=>{a("toast.show",`User "${t.name}" was created`),o()}})},o=()=>{m(),r()};return e.jsx(R,{show:s,onClose:o,children:e.jsxs("form",{onSubmit:p,className:"p-6 overflow-y-auto",children:[e.jsx("h2",{className:"text-xl font-medium text-gray-900 dark:text-gray-100",children:"Create New User"}),e.jsxs("div",{className:"mt-8",children:[e.jsx(U,{htmlFor:"name",value:"name"}),e.jsx(M,{id:"name",className:"mt-1 block w-full",value:t.name,onChange:u=>n("name",u.target.value),required:!0,isFocused:!0}),e.jsx(k,{className:"mt-2",message:h.name})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(U,{htmlFor:"email",value:"Email"}),e.jsx(M,{id:"email",className:"mt-1 block w-full",value:t.email,onChange:u=>n("email",u.target.value),required:!0,isFocused:!0}),e.jsx(k,{className:"mt-2",message:h.email})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx(A,{name:"is_admin",checked:t.is_admin,onChange:u=>n("is_admin",u.target.checked)}),e.jsx("span",{className:"ms-2 text-sm text-gray-600 dark:text-gray-400",children:"Admin User"})]}),e.jsx(k,{className:"mt-2",message:h.is_admin})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(F,{onClick:o,children:"Cancel"}),e.jsx(D,{className:"ms-3",disabled:l,children:"Create User"})]})]})})};function de({header:s,children:r}){const a=I(),t=a.props.auth.user,n=a.props.conversations,[l,m]=i.useState(!1),{emit:x}=b(),[h,p]=i.useState(!1);return i.useEffect(()=>(n.forEach(o=>{let u=`message.group.${o.id}`;o.is_user&&(u=`message.user.${[parseInt(t.id),parseInt(o.id)].sort((c,g)=>c-g).join("-")}`),window.Echo.private(u).error(c=>{console.log(c)}).listen("SocketMessage",c=>{console.log("SocketMessage",c);const g=c.message;x("message.created",g),g.sender_id!==t.id&&x("newMessageNotification",{user:g.sender,group_id:g.group_id,message:g.message||`Shared ${g.attachments.length===1?"an attachment":g.attachments.length+"attachments"}`})}),o.is_group&&window.Echo.private(`group.deleted.${o.id}`).listen("GroupDeleted",c=>{console.log("GroupDeleted",c),x("group.deleted",{id:c.id,name:c.name})}).error(c=>{console.log(c)})}),()=>{n.forEach(o=>{let u=`message.group.${o.id}`;o.is_user&&(u=`message.user.${[parseInt(t.id),parseInt(o.id)].sort((c,g)=>c-g).join("-")}`),window.Echo.leave(u),o.is_group&&window.Echo.leave(`group.deleted.${o.id}`)})}),[n]),e.jsxs(e.Fragment,{children:[e.jsx(L,{title:"Home"}),e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex flex-col h-screen",children:[e.jsxs("nav",{className:"bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"shrink-0 flex items-center",children:e.jsxs(y,{href:"/",className:"gap-2 flex items-center",children:[e.jsx(_,{className:"block h-9 w-auto fill-current text-gray-800 dark:text-gray-200"}),e.jsx("h1",{children:"DevToDevs"})]})}),e.jsx("div",{className:"hidden space-x-8 sm:-my-px sm:ms-10 sm:flex",children:e.jsx(V,{href:route("dashboard"),active:route().current("dashboard"),children:"Home"})})]}),e.jsx("div",{className:"hidden sm:flex sm:items-center sm:ms-6",children:e.jsxs("div",{className:"flex ms-3 relative",children:[t.is_admin&&e.jsxs(D,{onClick:()=>p(!0),children:[e.jsx(O,{className:"h-5 w-5 mr-2"}),"Add New User"]}),e.jsxs(f,{children:[e.jsx(f.Trigger,{children:e.jsx("span",{className:"inline-flex rounded-md",children:e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 hover:text-gray-700 dark:hover:text-gray-300 focus:outline-none transition ease-in-out duration-150",children:[e.jsx(N,{user:t}),t.name,e.jsx("svg",{className:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})}),e.jsxs(f.Content,{children:[e.jsx(f.Link,{href:route("profile.edit"),children:"Profile"}),e.jsx(f.Link,{href:route("logout"),method:"post",as:"button",children:"Log Out"})]})]})]})}),e.jsx("div",{className:"-me-2 flex items-center sm:hidden",children:e.jsx("button",{onClick:()=>m(o=>!o),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 dark:text-gray-500 hover:text-gray-500 dark:hover:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-900 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-900 focus:text-gray-500 dark:focus:text-gray-400 transition duration-150 ease-in-out",children:e.jsxs("svg",{className:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("path",{className:l?"hidden":"inline-flex",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"}),e.jsx("path",{className:l?"inline-flex":"hidden",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})]})})})]})}),e.jsxs("div",{className:(l?"block":"hidden")+" sm:hidden",children:[e.jsx("div",{className:"pt-2 pb-3 space-y-1",children:e.jsx(w,{href:route("dashboard"),active:route().current("dashboard"),children:"Home"})}),e.jsxs("div",{className:"pt-4 pb-1 border-t border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex px-3 items-center",children:[e.jsx(N,{user:t}),e.jsxs("div",{className:"px-4",children:[e.jsx("div",{className:"font-medium text-base text-gray-800 dark:text-gray-200",children:t.name}),e.jsx("div",{className:"font-medium text-sm text-gray-500",children:t.email})]})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx(w,{href:route("profile.edit"),children:"Profile"}),e.jsx(w,{method:"post",href:route("logout"),as:"button",children:"Log Out"})]})]})]})]}),s&&e.jsx("header",{className:"bg-white dark:bg-gray-800 shadow",children:e.jsx("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:s})}),r]}),e.jsx(Y,{}),e.jsx(J,{}),e.jsx(K,{show:h,onClose:()=>p(!1)})]})}export{de as A,ie as T};
